\section{Multi-Agent Source Localization}
\label{sec:03_multiAgentLoca}

The final whistle sound source localization is realized by collecting the
all \ac{WSDE} results of all active robots and combining the directions
into one xy-position outcome.
Two separate implementation details are covered in the following.
First, the actual localization algorithm that concludes the source localization
task is set in focus.
How the process of the multi-agent decision proceeds including the communication
is dealt within \cref{subsec:03_teamCommunication}.

% -------------------------------------------------------------

% PSEUDO CODE UPDATING ALGORITHM
\begin{algorithm}[H]
    \caption{Bayesian Updating}\label{alg:03_multiAgentLoca}
    \begin{algorithmic}[1]
        \Procedure {WhistleLocalization}{$array<R>$}
            \For{$j \in 0:R.size()$}
                \For{$k \in j+1:R.size()$}
                    \State $\vec{\mu}_{jk} \gets \Call{FindIntersection}{R[j], R[k]}$
                    \State $\textbf{\textit{C}}_{jk} \gets \Call{CalulateCovariance}{R[j], R[k]}$
                    \If{first intersection found}
                        \State $\vec{\mu} \gets \vec{\mu}_{jk}$
                        \State $\textbf{\textit{Q}} \gets \textbf{\textit{C}}_{jk}$
                    \ElsIf{intersection found}
                        \State $\textbf{\textit{S}}_{jk} \gets \textbf{\textit{Q}} + \textbf{\textit{C}}_{jk}$
                        \State $\textbf{\textit{K}}_{jk} \gets \textbf{\textit{Q}} \cdot \textbf{\textit{S}}_{jk}^{-1}$
                        \State $\vec{\mu} \gets \vec{\mu} + \textbf{\textit{K}}_{jk} \cdot (\vec{\mu}_{jk} - \vec{\mu})$
                        \State $\textbf{\textit{Q}} \gets \textbf{\textit{Q}} - \textbf{\textit{K}}_{jk} \cdot \textbf{\textit{Q}}$
                    \EndIf
                \EndFor
            \EndFor
            \State \textbf{return} $\vec{\mu}$
        \EndProcedure\vspace{12pt}
    \end{algorithmic}
\end{algorithm}
% -------------------------------------------------------------


For the evaluation of the methods, the team decision is implemented in
Python for offline analysis of the sample data additionally.

% Each value input is paired with the other rays. If they cross, the
% filter is updated with this intersection until all pairs of direction
% rays are being considered.
% \missing[]{More info}

% For the real case, a team whistle localization module is
% introduced into the HULKs' framework.
% Here, each robots fills the result of the determined direction into
% the team message.
% \missing[inline]{How this works.}

\subsection{Team Communication}
\label{subsec:03_teamCommunication}

To agree on a whistle position as multi-agent system, the detected sound source
direction is added into the team message as float.
Depending on the implementation, additional information like distance or
\ac{PSNR} can be appended.
